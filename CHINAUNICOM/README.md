# 中国联通自动签到 Surge 模块

> 基于青龙面板 v1.12 版本改造，适配 iOS Surge 环境

## 功能特性

✅ **自动 Cookie 获取** - 打开联通 APP 自动抓取 token  
✅ **签到区签到** - 每日签到领话费红包和积分  
✅ **天天领现金** - 自动打卡领立减金  
✅ **权益超市** - 自动完成任务+抽奖+浇水  
✅ **联通阅读** - 模拟阅读+抽奖  
✅ **智能通知** - 签到结果实时推送

## 快速开始

### 1. 安装模块

在 Surge 配置中添加模块：

```
https://raw.githubusercontent.com/5jwoj/BeRich/main/CHINAUNICOM/chinaunicom.sgmodule
```

或者手动添加到模块列表。

### 2. 获取 Cookie

1. **启用模块的 MITM 功能**
   - 在 Surge 模块页面找到"中国联通自动签到"
   - 确保 MITM 开关已开启

2. **打开联通 APP**
   - 进入"我的"页面
   - 等待几秒

3. **查看通知**
   - Surge 会推送"Cookie 获取成功"通知
   - 通知中包含手机号和 Token 状态

4. **关闭 Cookie 抓取**（可选）
   - Cookie 获取成功后，建议关闭 MITM 中的"联通Cookie"规则
   - 避免重复拦截请求

### 3. 等待自动执行

- 脚本默认每天 7:00-23:00，每 2 小时自动执行一次
- 也可以在 Surge 脚本页面手动运行"联通签到"

### 4. 查看结果

执行完成后，Surge 会推送通知，显示：
- 签到状态
- 话费红包余额变化
- 任务完成情况
- 抽奖结果

## 配置说明

### Cron 时间调整

默认执行时间：每天 7:00-23:00，每 2 小时一次

```
0 7-23/2 * * *
```

可根据需求修改：

```
# 每天 8:00 和 20:00 执行两次
0 8,20 * * *

# 每天 9:00 执行一次
0 9 * * *

# 每 4 小时执行一次
0 */4 * * *
```

### MITM 域名

模块已自动配置以下域名：

```
m.client.10010.com
*.10010.com
contact.bol.wo.cn
backward.bol.wo.cn
```

## 文件说明

| 文件 | 说明 |
|------|------|
| `chinaunicom.sgmodule` | Surge 模块配置文件 |
| `chinaunicom_cookie.js` | Cookie 自动抓取脚本 |
| `chinaunicom_task.js` | 主任务执行脚本 |
| `README.md` | 使用说明文档 |

## 常见问题

### Q1: Cookie 抓取失败怎么办？

**A:** 
1. 确认模块的 MITM 开关已启用
2. 检查 Surge 的 MitM 证书是否已安装并信任
3. 尝试完全退出联通 APP 后重新打开
4. 查看 Surge 日志，确认是否有拦截记录

### Q2: 脚本执行失败显示"未配置 token"

**A:**
1. 确认已成功获取 Cookie（收到通知）
2. 检查 Surge 持久化存储中是否有 `chinaunicom_token`
3. 尝试重新获取 Cookie

### Q3: Token 过期了怎么办？

**A:**
Token 有效期约 30 天，过期后：
1. 重新启用"联通Cookie"规则
2. 打开联通 APP 进入"我的"页面
3. 等待抓取成功通知

### Q4: 为什么有些功能显示"开发中"？

**A:**
为确保稳定性，当前版本只实现了核心功能：
- ✅ 签到区（完整）
- ✅ Cookie 获取（完整）
- ⚠️ 天天领现金（部分）
- ⚠️ 权益超市（部分）
- ⚠️ 联通阅读（部分）

后续版本会逐步完善所有功能。

### Q5: 如何查看脚本执行日志？

**A:**
1. 打开 Surge
2. 进入"工具" - "最近请求"或"日志"
3. 搜索"中国联通"查看详细日志

## 注意事项

> **⚠️ 重要提示**
> 
> 1. Cookie 获取成功后，建议关闭 Cookie 抓取规则，避免重复拦截
> 2. Token 有效期约 30 天，到期后需重新打开 APP 获取
> 3. 不建议频繁执行，默认每 2 小时一次即可
> 4. 首次使用可能需要等待一个执行周期

> **⚠️ 免责声明**
> 
> - 本模块仅供学习交流使用
> - 请勿用于商业用途
> - 使用前请确保了解相关风险
> - 由使用本脚本产生的任何问题，开发者概不负责

## 更新日志

### v1.0 (2025-12-27)

- ✅ 初始版本发布
- ✅ 实现自动 Cookie 抓取
- ✅ 支持签到区完整功能
- ✅ 适配 Surge iOS 环境
- ✅ 优化日志输出和通知机制

## 贡献

欢迎提交 Issue 和 Pull Request！

## License

MIT License

## 致谢

- 原脚本作者: yaohuo28507
- Surge iOS: [https://nssurge.com/](https://nssurge.com/)

---

**如果这个项目对你有帮助，请给个 ⭐️ Star 支持一下！**
